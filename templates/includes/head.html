{% load static %}

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Theme initialization script - Must be at the top of head -->
<script>
  // Apply saved theme immediately to prevent flickering
  (function() {
    try {
      // Check for dark mode preference
      var isDarkMode = localStorage.getItem('darkMode') === 'true';
      if (isDarkMode) {
        // Apply dark mode class immediately to html element
        document.documentElement.classList.add('dark-mode-preload');
        
        // Add a style block to ensure correct theme during initial page load
        var style = document.createElement('style');
        style.innerHTML = `
          /* Dark mode preload styles */
          html.dark-mode-preload,
          html.dark-mode-preload body,
          html.dark-mode-preload .g-sidenav-show,
          html.dark-mode-preload .sidenav,
          html.dark-mode-preload .card,
          html.dark-mode-preload .bg-gray-100,
          html.dark-mode-preload .bg-gray-200 {
            background-color: #141727 !important;
            color: #fff !important;
            transition: none !important;
          }
          
          /* Prevent white flash on load */
          html.dark-mode-preload .navbar,
          html.dark-mode-preload .main-content,
          html.dark-mode-preload .fixed-plugin .card,
          html.dark-mode-preload .card-body,
          html.dark-mode-preload .card-header {
            background-color: #1a2035 !important;
            color: #fff !important;
          }
          
          /* Ensure text is visible */
          html.dark-mode-preload h1, 
          html.dark-mode-preload h2,
          html.dark-mode-preload h3,
          html.dark-mode-preload h4,
          html.dark-mode-preload h5,
          html.dark-mode-preload h6,
          html.dark-mode-preload p,
          html.dark-mode-preload span:not(.badge) {
            color: rgba(255, 255, 255, 0.8) !important;
          }
          
          /* Fix text-dark elements in dark mode preload */
          html.dark-mode-preload .text-dark,
          html.dark-mode-preload .btn-link.text-dark,
          html.dark-mode-preload i.text-dark,
          html.dark-mode-preload .fas.text-dark {
            color: rgba(255, 255, 255, 0.9) !important;
          }
        `;
        document.head.appendChild(style);
        
        // Add class to body as soon as it's available
        document.addEventListener('DOMContentLoaded', function() {
          document.body.classList.add('dark-version');
        });
      }
    } catch (e) {
      console.error('Error in theme preload script:', e);
    }
  })();
</script>

<!-- Additional dark mode styles for better text contrast -->
<style>
  /* Improve text contrast in dark mode */
  body.dark-version .navbar-nav .nav-link,
  body.dark-version a.nav-link,
  body.dark-version .navbar a,
  body.dark-version header a {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Ensure header action links are visible */
  body.dark-version .navbar-nav a:hover,
  body.dark-version header a:hover,
  body.dark-version .nav-link:hover {
    color: #fff !important;
    text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
  }
  
  /* Make row details text more readable */
  body.dark-version td,
  body.dark-version .table-responsive td,
  body.dark-version .dataTables_wrapper td {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Improve readability of small text and details */
  body.dark-version .text-xs,
  body.dark-version .text-sm,
  body.dark-version small,
  body.dark-version .small {
    color: rgba(255, 255, 255, 0.85) !important;
  }
  
  /* Fix for "Change Password" and header links */
  body.dark-version .navbar-nav .nav-item .nav-link.text-body,
  body.dark-version .text-body {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Fix for buttons and icons with text-dark class */
  body.dark-version .btn-link.text-dark,
  body.dark-version a.text-dark,
  body.dark-version .text-dark {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  body.dark-version i.text-dark,
  body.dark-version .fas.text-dark,
  body.dark-version .far.text-dark,
  body.dark-version .fal.text-dark,
  body.dark-version .fad.text-dark,
  body.dark-version .fab.text-dark {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  /* Fix Details buttons specifically */
  body.dark-version a.btn-link.text-dark {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  body.dark-version a.btn-link.text-dark:hover {
    color: #ffffff !important;
    text-decoration: underline;
  }
  
  /* Additional dropdown menu fixes */
  body.dark-version .dropdown-menu {
    background-color: #1a2035 !important;
  }
  
  body.dark-version .dropdown-item {
    color: rgba(255, 255, 255, 0.9) !important;
  }
  
  body.dark-version .dropdown-item:hover {
    background-color: #252f4a !important;
  }
</style>

<link rel="apple-touch-icon" sizes="76x76" href="{% static "assets/img/apple-icon.png" %}">
<link rel="icon" type="image/png" href="{% static "assets/img/favicon.png" %}">
<title>
  {% if page_title %}{{ page_title }} | Neuralami{% else %}Neuralami{% endif %}
</title>
<!--     Fonts and icons     -->
<link href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,800" rel="stylesheet" />
<!-- Nucleo Icons -->
<link href="https://demos.creative-tim.com/argon-dashboard-pro/assets/css/nucleo-icons.css" rel="stylesheet" />
<link href="https://demos.creative-tim.com/argon-dashboard-pro/assets/css/nucleo-svg.css" rel="stylesheet" />
<!-- Font Awesome Icons -->
<script src="{% static "assets/js/plugins/font-awesome6.4.0.min.js" %}" crossorigin="anonymous"></script>
<!-- CSS Files -->
<link id="pagestyle" href="{% static "assets/css/soft-ui-dashboard.css" %}?v={% now 'U' %}" rel="stylesheet" />
